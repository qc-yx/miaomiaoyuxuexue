<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’ª ä»Šæ—¥è¿åŠ¨</title>
    <!-- æ·»åŠ PWAä¼˜åŒ–çš„metaæ ‡ç­¾ -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="å¤šåŠŸèƒ½åº”ç”¨">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“±</text></svg>">
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: url('images/picture/6/2f12b26355cc165dea987d7c1eeb5379.jpg') center/cover no-repeat;
    min-height: 100vh;
    color: #333;
}

        /* é¡µé¢å®¹å™¨ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* é¡µé¢æ ‡é¢˜ */
        .page-title {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* å¯¼èˆªæŒ‰é’® */
        .nav-buttons {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 15px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
            align-items: start;
        }

        /* åŠŸèƒ½å¡ç‰‡æ ·å¼ */
        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            color: white;
        }

        /* åŠŸèƒ½å¡ç‰‡æ ‡é¢˜ */
        .feature-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: white;
            text-align: center;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 15px;
        }

        /* è¿åŠ¨åˆ—è¡¨åŒºåŸŸ */
        .exercise-list-container {
            margin-bottom: 20px;
        }

        .exercise-list {
            list-style: none;
            margin-bottom: 20px;
        }

        .exercise-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin-bottom: 10px;
            background: #f7fafc;
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
        }

        .exercise-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .exercise-item.completed {
            background: #c6f6d5;
            border-color: #48bb78;
            text-decoration: line-through;
            opacity: 0.8;
        }

        .exercise-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .exercise-checkbox {
            transform: scale(1.2);
        }

        .exercise-details {
            flex: 1;
        }

        .exercise-name {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 3px;
        }

        .exercise-meta {
            font-size: 0.85rem;
            color: #718096;
        }

        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats-section {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* æ·»åŠ è¿åŠ¨è¡¨å• */
        .add-exercise-form {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
        }

        .form-input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.4);
        }

        .btn.secondary {
            background: linear-gradient(135deg, #a0aec0, #718096);
        }

        .btn.secondary:hover {
            box-shadow: 0 5px 15px rgba(160, 174, 192, 0.4);
        }

        .btn.danger {
            background: linear-gradient(135deg, #fc8181, #f56565);
        }

        .btn.danger:hover {
            box-shadow: 0 5px 15px rgba(252, 129, 129, 0.4);
        }

        /* è‡ªå®šä¹‰è®¾ç½®åŒºåŸŸ */
        .customization-section {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #4a5568;
            font-weight: 600;
        }

        /* è¿åŠ¨ç±»å‹ç®¡ç† */
        .exercise-types {
            margin-bottom: 20px;
        }

        .type-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .type-tag {
            background: #e2e8f0;
            color: #4a5568;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .type-tag:hover {
            background: #cbd5e0;
        }

        .type-tag.active {
            background: #4299e1;
            color: white;
        }

        /* æ·»åŠ ç±»å‹è¡¨å• */
        .add-type-form {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .page-title {
                font-size: 2rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .exercise-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .exercise-info {
                width: 100%;
            }
        }

        /* å°å±ç§»åŠ¨è®¾å¤‡é€‚é… */
        @media (max-width: 480px) {
            /* ä¼˜åŒ–å®¹å™¨å†…è¾¹è· */
            .container {
                padding: 10px;
            }

            /* è°ƒæ•´æ ‡é¢˜å¤§å° */
            .page-title {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }

            /* è°ƒæ•´å¯¼èˆªæŒ‰é’®å¸ƒå±€ */
            .nav-buttons {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
                margin-bottom: 20px;
            }

            .nav-btn {
                padding: 10px 16px;
                font-size: 14px;
                border-radius: 20px;
            }

            /* è°ƒæ•´åŠŸèƒ½å¡ç‰‡å†…è¾¹è· */
            .feature-card {
                padding: 20px;
            }

            /* è°ƒæ•´å¡ç‰‡æ ‡é¢˜å¤§å° */
            .feature-title {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            /* è°ƒæ•´ç»Ÿè®¡ä¿¡æ¯ */
            .stats-section {
                padding: 15px;
            }

            .stats-grid {
                gap: 15px;
            }

            .stat-value {
                font-size: 1.6rem;
            }

            /* è°ƒæ•´æ·»åŠ è¿åŠ¨è¡¨å• */
            .add-exercise-form {
                padding: 15px;
            }

            /* è°ƒæ•´é€‰é¡¹å¡æŒ‰é’® */
            #pending-tab, #completed-tab {
                padding: 10px 16px;
                font-size: 14px;
                flex: 1;
            }

            /* è°ƒæ•´è¿åŠ¨åˆ—è¡¨é¡¹ */
            .exercise-item {
                padding: 12px;
            }

            .exercise-name {
                font-size: 14px;
            }

            .exercise-meta {
                font-size: 12px;
            }

            /* è°ƒæ•´æŒ‰é’®æ ·å¼ */
            .btn {
                padding: 12px 20px;
                font-size: 14px;
                width: 100%;
                margin-bottom: 10px;
            }

            /* è°ƒæ•´æŒ‰é’®ç»„ */
            div[style="display: flex; gap: 10px;"] {
                flex-direction: column;
                gap: 8px;
            }

            /* è°ƒæ•´è¿åŠ¨ç±»å‹æ ‡ç­¾ */
            .type-tag {
                padding: 6px 12px;
                font-size: 12px;
                border-radius: 15px;
            }

            /* è°ƒæ•´æ·»åŠ ç±»å‹è¡¨å• */
            .add-type-form {
                flex-direction: column;
                gap: 8px;
            }

            /* è°ƒæ•´æé†’è®¾ç½® */
            div[style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;"] {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }

            div[style="display: flex; gap: 10px;"] {
                flex-direction: column;
            }

            /* è°ƒæ•´ç­›é€‰å’Œæ’åºè¡¨å• */
            .customization-section .form-row {
                gap: 10px;
            }

            .setting-item {
                margin-bottom: 12px;
            }

            .setting-label {
                font-size: 14px;
            }
        }

        /* æ¨ªå±è®¾å¤‡é€‚é… */
        @media (orientation: landscape) and (max-height: 500px) {
            /* è°ƒæ•´å®¹å™¨å†…è¾¹è· */
            .container {
                padding: 10px;
            }

            /* è°ƒæ•´æ ‡é¢˜å¤§å° */
            .page-title {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }

            /* è°ƒæ•´å¯¼èˆªæŒ‰é’® */
            .nav-buttons {
                gap: 10px;
                margin-bottom: 20px;
            }

            .nav-btn {
                padding: 8px 12px;
                font-size: 12px;
            }

            /* è°ƒæ•´åŠŸèƒ½å¡ç‰‡ */
            .feature-card {
                padding: 15px;
            }

            .feature-title {
                font-size: 1.1rem;
                margin-bottom: 12px;
            }

            /* è°ƒæ•´ç»Ÿè®¡ä¿¡æ¯ */
            .stats-section {
                padding: 15px;
            }

            .stats-grid {
                gap: 15px;
            }

            .stat-value {
                font-size: 1.4rem;
            }

            /* è°ƒæ•´è¿åŠ¨åˆ—è¡¨ */
            .exercise-list {
                max-height: 200px;
                overflow-y: auto;
            }

            .exercise-item {
                padding: 12px;
            }

            /* è°ƒæ•´è¡¨å•å’ŒæŒ‰é’® */
            .add-exercise-form {
                padding: 15px;
            }

            .form-row {
                gap: 10px;
            }

            .btn {
                padding: 10px 16px;
                font-size: 12px;
            }

            /* è°ƒæ•´ç±»å‹æ ‡ç­¾ */
            .type-tag {
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        /* è§¦æ‘¸è®¾å¤‡ä¼˜åŒ– */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»é™¤æ‚¬åœæ•ˆæœ */
            .nav-btn:hover, .btn:hover, .type-tag:hover, .exercise-item:hover {
                transform: none;
                box-shadow: none;
            }

            .type-tag:hover {
                background: #e2e8f0;
            }

            .exercise-item:hover {
                background: #f7fafc;
            }

            /* å¢å¤§è§¦æ‘¸ç›®æ ‡ */
            .nav-btn, .btn, .type-tag, .exercise-checkbox, .form-input, select {
                min-width: 44px;
                min-height: 44px;
                cursor: pointer;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="page-title">ğŸƒ ä»Šæ—¥è¿åŠ¨</h1>
        
        <!-- å¯¼èˆªæŒ‰é’® -->
        <div class="nav-buttons">
            <a href="main.html" class="nav-btn">è¿”å›é¦–é¡µ</a>
            <a href="wheel.html" class="nav-btn">è½¬ç›˜æ¸¸æˆ</a>
            <a href="cuisine.html" class="nav-btn">ä»Šæ—¥èœç³»</a>
            <a href="notes.html" class="nav-btn">è®°äº‹æœ¬</a>
        </div>
        
        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- è¿åŠ¨ç®¡ç†åŒºåŸŸ -->
            <div class="feature-card">
                <h2 class="feature-title">è¿åŠ¨åˆ—è¡¨</h2>
                
                <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                <div class="stats-section">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="total-exercises">0</div>
                            <div class="stat-label">æ€»è¿åŠ¨æ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="completed-exercises">0</div>
                            <div class="stat-label">å·²å®Œæˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="pending-exercises">0</div>
                            <div class="stat-label">å¾…å®Œæˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="completion-rate">0%</div>
                            <div class="stat-label">å®Œæˆç‡</div>
                        </div>
                    </div>
                </div>
                
                <!-- æ·»åŠ è¿åŠ¨è¡¨å• -->
                <div class="add-exercise-form">
                    <h3 class="section-title">æ·»åŠ è¿åŠ¨</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">è¿åŠ¨åç§°</label>
                            <input type="text" class="form-input" id="exercise-name" placeholder="ä¾‹å¦‚ï¼šè·‘æ­¥">
                        </div>
                        <div class="form-group">
                            <label class="form-label">è¿åŠ¨ç±»å‹</label>
                            <select class="form-input" id="exercise-type">
                                <option value="æœ‰æ°§è¿åŠ¨">æœ‰æ°§è¿åŠ¨</option>
                                <option value="åŠ›é‡è®­ç»ƒ">åŠ›é‡è®­ç»ƒ</option>
                                <option value="æŸ”éŸ§æ€§è®­ç»ƒ">æŸ”éŸ§æ€§è®­ç»ƒ</option>
                                <option value="å¹³è¡¡è®­ç»ƒ">å¹³è¡¡è®­ç»ƒ</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">æ—¶é•¿ (åˆ†é’Ÿ)</label>
                            <input type="number" class="form-input" id="exercise-duration" placeholder="ä¾‹å¦‚ï¼š30">
                        </div>
                        <div class="form-group">
                            <label class="form-label">å¼ºåº¦</label>
                            <select class="form-input" id="exercise-intensity">
                                <option value="ä½">ä½</option>
                                <option value="ä¸­" selected>ä¸­</option>
                                <option value="é«˜">é«˜</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn" id="add-exercise">æ·»åŠ è¿åŠ¨</button>
                </div>
                
                <!-- è¿åŠ¨åˆ—è¡¨é€‰é¡¹å¡ -->
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <button class="btn" id="pending-tab" style="background: #4299e1;">å¾…å®Œæˆè¿åŠ¨</button>
                        <button class="btn" id="completed-tab" style="background: #48bb78;">å·²å®Œæˆè¿åŠ¨</button>
                    </div>
                    
                    <!-- å¾…å®Œæˆè¿åŠ¨åˆ—è¡¨ -->
                    <div class="exercise-list-container" id="pending-list-container">
                        <h3 class="section-title">å¾…å®Œæˆè¿åŠ¨</h3>
                        <ul class="exercise-list" id="pending-exercise-list">
                            <!-- å¾…å®Œæˆè¿åŠ¨é¡¹ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </ul>
                    </div>
                    
                    <!-- å·²å®Œæˆè¿åŠ¨åˆ—è¡¨ -->
                    <div class="exercise-list-container" id="completed-list-container" style="display: none;">
                        <h3 class="section-title">å·²å®Œæˆè¿åŠ¨</h3>
                        <ul class="exercise-list" id="completed-exercise-list">
                            <!-- å·²å®Œæˆè¿åŠ¨é¡¹ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </ul>
                    </div>
                </div>
                
                <!-- æ¯æ—¥æé†’è®¾ç½® -->
                <div class="customization-section">
                    <h3 class="section-title">æ¯æ—¥æé†’</h3>
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="reminder-toggle"> å¯ç”¨æ¯æ—¥æé†’
                        </label>
                        <div style="display: flex; gap: 10px;">
                            <input type="time" id="reminder-time" style="padding: 8px; border: 2px solid #e2e8f0; border-radius: 6px;">
                            <button class="btn" id="save-reminder" style="padding: 8px 15px; font-size: 14px;">ä¿å­˜æé†’</button>
                        </div>
                    </div>
                    <div id="reminder-status" style="font-size: 14px; color: #718096;"></div>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button class="btn secondary" id="clear-completed">æ¸…é™¤å·²å®Œæˆ</button>
                    <button class="btn danger" id="clear-all">æ¸…é™¤æ‰€æœ‰</button>
                </div>
            </div>
            
            <!-- è‡ªå®šä¹‰è®¾ç½®åŒºåŸŸ -->
            <div class="feature-card">
                <h2 class="feature-title">è‡ªå®šä¹‰è®¾ç½®</h2>
                
                <div class="customization-section">
                    <h3 class="section-title">è¿åŠ¨ç±»å‹ç®¡ç†</h3>
                    <div class="type-list" id="type-list">
                        <!-- è¿åŠ¨ç±»å‹æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    <div class="add-type-form">
                        <input type="text" class="form-input" id="new-type" placeholder="è¾“å…¥æ–°è¿åŠ¨ç±»å‹">
                        <button class="btn" id="add-type">æ·»åŠ ç±»å‹</button>
                    </div>
                </div>
                
                <div class="customization-section">
                    <h3 class="section-title">ç­›é€‰å’Œæ’åº</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">ç­›é€‰æ¡ä»¶</label>
                            <select class="form-input" id="filter-type">
                                <option value="all">å…¨éƒ¨</option>
                                <option value="completed">å·²å®Œæˆ</option>
                                <option value="pending">å¾…å®Œæˆ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">æ’åºæ–¹å¼</label>
                            <select class="form-input" id="sort-by">
                                <option value="created" selected>åˆ›å»ºæ—¶é—´</option>
                                <option value="name">è¿åŠ¨åç§°</option>
                                <option value="duration">è¿åŠ¨æ—¶é•¿</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn" id="apply-filters">åº”ç”¨ç­›é€‰</button>
                </div>
                
                <div class="customization-section">
                    <h3 class="section-title">æ•°æ®ç®¡ç†</h3>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn secondary" id="export-data">å¯¼å‡ºæ•°æ®</button>
                        <button class="btn secondary" id="import-data">å¯¼å…¥æ•°æ®</button>
                        <button class="btn danger" id="reset-data">é‡ç½®æ•°æ®</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script-github-pages.js"></script>
    <script>
        // DOMåŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', async function() {
            // åˆå§‹åŒ–å˜é‡
            let exercises = [];
            let exerciseTypes = ['æœ‰æ°§è¿åŠ¨', 'åŠ›é‡è®­ç»ƒ', 'æŸ”éŸ§æ€§è®­ç»ƒ', 'å¹³è¡¡è®­ç»ƒ'];
            let currentFilter = 'all';
            let currentSort = 'created';
            
            // æ¯æ—¥æé†’è®¾ç½®
            let reminderSettings = {
                enabled: false,
                time: '09:00'
            };

            // åŠ è½½æé†’è®¾ç½®
            async function loadReminderSettings() {
                try {
                    const data = await exercisesAPI.getReminderSettings();
                    reminderSettings = data;
                } catch (error) {
                    console.error('åŠ è½½æé†’è®¾ç½®å¤±è´¥:', error);
                }
                initReminderSettings();
            }
            
            // è·å–DOMå…ƒç´ 
            const pendingExerciseList = document.getElementById('pending-exercise-list');
            const completedExerciseList = document.getElementById('completed-exercise-list');
            const pendingListContainer = document.getElementById('pending-list-container');
            const completedListContainer = document.getElementById('completed-list-container');
            const pendingTab = document.getElementById('pending-tab');
            const completedTab = document.getElementById('completed-tab');
            const addExerciseBtn = document.getElementById('add-exercise');
            const clearCompletedBtn = document.getElementById('clear-completed');
            const clearAllBtn = document.getElementById('clear-all');
            const exerciseName = document.getElementById('exercise-name');
            const exerciseType = document.getElementById('exercise-type');
            const exerciseDuration = document.getElementById('exercise-duration');
            const exerciseIntensity = document.getElementById('exercise-intensity');
            const typeList = document.getElementById('type-list');
            const addTypeBtn = document.getElementById('add-type');
            const newTypeInput = document.getElementById('new-type');
            const filterType = document.getElementById('filter-type');
            const sortBy = document.getElementById('sort-by');
            const applyFiltersBtn = document.getElementById('apply-filters');
            const exportDataBtn = document.getElementById('export-data');
            const importDataBtn = document.getElementById('import-data');
            const resetDataBtn = document.getElementById('reset-data');
            
            // æ¯æ—¥æé†’å…ƒç´ 
            const reminderToggle = document.getElementById('reminder-toggle');
            const reminderTime = document.getElementById('reminder-time');
            const saveReminderBtn = document.getElementById('save-reminder');
            const reminderStatus = document.getElementById('reminder-status');
            
            // ç»Ÿè®¡å…ƒç´ 
            const totalExercises = document.getElementById('total-exercises');
            const completedExercises = document.getElementById('completed-exercises');
            const pendingExercises = document.getElementById('pending-exercises');
            const completionRate = document.getElementById('completion-rate');
            
            // åŠ è½½è¿åŠ¨æ•°æ®
            async function loadExercises() {
                try {
                    const data = await exercisesAPI.getExercises();
                    exercises = data;
                } catch (error) {
                    console.error('åŠ è½½è¿åŠ¨æ•°æ®å¤±è´¥:', error);
                    exercises = [];
                }
                renderExerciseList();
            }

            // åŠ è½½è¿åŠ¨ç±»å‹
            async function loadExerciseTypes() {
                try {
                    const data = await exercisesAPI.getExerciseTypes();
                    exerciseTypes = data;
                } catch (error) {
                    console.error('åŠ è½½è¿åŠ¨ç±»å‹å¤±è´¥:', error);
                    exerciseTypes = ['æœ‰æ°§è¿åŠ¨', 'åŠ›é‡è®­ç»ƒ', 'æŸ”éŸ§æ€§è®­ç»ƒ', 'å¹³è¡¡è®­ç»ƒ'];
                }
                renderExerciseTypes();
            }

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            function updateStats() {
                const total = exercises.length;
                const completed = exercises.filter(ex => ex.completed).length;
                const pending = total - completed;
                const rate = total > 0 ? Math.round((completed / total) * 100) : 0;
                
                totalExercises.textContent = total;
                completedExercises.textContent = completed;
                pendingExercises.textContent = pending;
                completionRate.textContent = `${rate}%`;
            }
            
            // æ¸²æŸ“è¿åŠ¨åˆ—è¡¨
            function renderExerciseList() {
                // å¾…å®Œæˆè¿åŠ¨åˆ—è¡¨
                pendingExerciseList.innerHTML = '';
                // å·²å®Œæˆè¿åŠ¨åˆ—è¡¨
                completedExerciseList.innerHTML = '';
                
                // ç­›é€‰å’Œæ’åº
                let allExercises = [...exercises];
                
                // åº”ç”¨æ’åº
                if (currentSort === 'name') {
                    allExercises.sort((a, b) => a.name.localeCompare(b.name));
                } else if (currentSort === 'duration') {
                    allExercises.sort((a, b) => a.duration - b.duration);
                } else {
                    // é»˜è®¤æŒ‰åˆ›å»ºæ—¶é—´æ’åº
                    allExercises.sort((a, b) => b.id - a.id);
                }
                
                // æ¸²æŸ“åˆ°ä¸åŒåˆ—è¡¨
                allExercises.forEach(exercise => {
                    const li = document.createElement('li');
                    li.className = `exercise-item ${exercise.completed ? 'completed' : ''}`;
                    li.dataset.id = exercise.id;
                    
                    li.innerHTML = `
                        <div class="exercise-info">
                            <input type="checkbox" id="exercise-checkbox-${exercise.id}" name="exercise-checkbox-${exercise.id}" class="exercise-checkbox" ${exercise.completed ? 'checked' : ''}>
                            <div class="exercise-details">
                                <div class="exercise-name">${exercise.name}</div>
                                <div class="exercise-meta">
                                    ${exercise.type} â€¢ ${exercise.duration} åˆ†é’Ÿ â€¢ ${exercise.intensity}å¼ºåº¦
                                    ${exercise.completedAt ? `<br><small style="color: #48bb78;">å®Œæˆæ—¶é—´ï¼š${exercise.completedAt}</small>` : ''}
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button style="background: #fc8181; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer;" class="delete-exercise">åˆ é™¤</button>
                        </div>
                    `;
                    
                    // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
                    const checkbox = li.querySelector('.exercise-checkbox');
                    checkbox.addEventListener('change', () => {
                        toggleExerciseStatus(exercise.id);
                    });
                    
                    const deleteBtn = li.querySelector('.delete-exercise');
                    deleteBtn.addEventListener('click', () => {
                        deleteExercise(exercise.id);
                    });
                    
                    // æ·»åŠ åˆ°å¯¹åº”åˆ—è¡¨
                    if (exercise.completed) {
                        completedExerciseList.appendChild(li);
                    } else {
                        pendingExerciseList.appendChild(li);
                    }
                });
                
                // æ›´æ–°ç»Ÿè®¡
                updateStats();
            }
            
            // é€‰é¡¹å¡åˆ‡æ¢
            pendingTab.addEventListener('click', () => {
                pendingListContainer.style.display = 'block';
                completedListContainer.style.display = 'none';
                pendingTab.style.background = '#4299e1';
                completedTab.style.background = '#48bb78';
            });
            
            completedTab.addEventListener('click', () => {
                pendingListContainer.style.display = 'none';
                completedListContainer.style.display = 'block';
                pendingTab.style.background = '#4299e1';
                completedTab.style.background = '#38a169';
            });
            
            // è¯·æ±‚é€šçŸ¥æƒé™
            function requestNotificationPermission() {
                if ('Notification' in window) {
                    Notification.requestPermission();
                }
            }
            
            // æ˜¾ç¤ºæé†’é€šçŸ¥
            function showReminderNotification() {
                if ('Notification' in window && Notification.permission === 'granted') {
                    new Notification('ä»Šæ—¥è¿åŠ¨æé†’', {
                        body: 'è®°å¾—å®Œæˆä»Šå¤©çš„è¿åŠ¨è®¡åˆ’å“¦ï¼',
                        icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2348bb78"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>'
                    });
                }
            }
            
            // è®¾ç½®æ¯æ—¥æé†’
            function setDailyReminder() {
                // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
                if (window.reminderTimer) {
                    clearInterval(window.reminderTimer);
                }
                
                if (!reminderSettings.enabled) return;
                
                // è®¡ç®—å½“å‰æ—¶é—´å’Œæé†’æ—¶é—´çš„å·®å€¼
                function calculateTimeUntilReminder() {
                    const now = new Date();
                    const [hours, minutes] = reminderSettings.time.split(':').map(Number);
                    const reminderTime = new Date();
                    reminderTime.setHours(hours, minutes, 0, 0);
                    
                    // å¦‚æœä»Šå¤©çš„æé†’æ—¶é—´å·²è¿‡ï¼Œè®¾ç½®ä¸ºæ˜å¤©
                    if (reminderTime < now) {
                        reminderTime.setDate(reminderTime.getDate() + 1);
                    }
                    
                    return reminderTime - now;
                }
                
                // è®¾ç½®å®šæ—¶å™¨
                function setupReminder() {
                    const timeUntilReminder = calculateTimeUntilReminder();
                    
                    window.reminderTimer = setTimeout(() => {
                        showReminderNotification();
                        // æ¯å¤©é‡å¤
                        setupReminder();
                    }, timeUntilReminder);
                }
                
                setupReminder();
            }
            
            // ä¿å­˜æé†’è®¾ç½®
            async function saveReminderSettings() {
                try {
                    await exercisesAPI.saveReminderSettings(reminderSettings.enabled, reminderSettings.time);
                } catch (error) {
                    console.error('ä¿å­˜æé†’è®¾ç½®å¤±è´¥:', error);
                }
                updateReminderStatus();
                setDailyReminder();
            }
            
            // æ›´æ–°æé†’çŠ¶æ€æ˜¾ç¤º
            function updateReminderStatus() {
                if (reminderSettings.enabled) {
                    reminderStatus.textContent = `æ¯æ—¥æé†’å·²å¯ç”¨ï¼Œæ—¶é—´ï¼š${reminderSettings.time}`;
                } else {
                    reminderStatus.textContent = 'æ¯æ—¥æé†’å·²å…³é—­';
                }
            }
            
            // åˆå§‹åŒ–æé†’è®¾ç½®
            function initReminderSettings() {
                reminderToggle.checked = reminderSettings.enabled;
                reminderTime.value = reminderSettings.time;
                updateReminderStatus();
                setDailyReminder();
                requestNotificationPermission();
            }
            
            // æ¸²æŸ“è¿åŠ¨ç±»å‹
            function renderExerciseTypes() {
                typeList.innerHTML = '';
                
                exerciseTypes.forEach(type => {
                    const tag = document.createElement('div');
                    tag.className = 'type-tag';
                    tag.textContent = type;
                    tag.addEventListener('click', () => {
                        // è¿™é‡Œå¯ä»¥æ·»åŠ æŒ‰ç±»å‹ç­›é€‰çš„åŠŸèƒ½
                        tag.classList.toggle('active');
                    });
                    typeList.appendChild(tag);
                });
                
                // æ›´æ–°ç±»å‹é€‰æ‹©ä¸‹æ‹‰æ¡†
                updateTypeSelect();
            }
            
            // æ›´æ–°ç±»å‹é€‰æ‹©ä¸‹æ‹‰æ¡†
            function updateTypeSelect() {
                exerciseType.innerHTML = '';
                exerciseTypes.forEach(type => {
                    const option = document.createElement('option');
                    option.value = type;
                    option.textContent = type;
                    exerciseType.appendChild(option);
                });
            }
            
            // æ·»åŠ è¿åŠ¨
            async function addExercise() {
                const name = exerciseName.value.trim();
                const type = exerciseType.value;
                const duration = parseInt(exerciseDuration.value) || 0;
                const intensity = exerciseIntensity.value;
                
                if (!name) {
                    alert('è¯·è¾“å…¥è¿åŠ¨åç§°ï¼');
                    return;
                }
                
                try {
                    const newExercise = await exercisesAPI.createExercise(name, type, duration, intensity);
                    exercises.push(newExercise);
                    alert('è¿åŠ¨æ·»åŠ æˆåŠŸï¼');
                } catch (error) {
                    console.error('æ·»åŠ è¿åŠ¨å¤±è´¥:', error);
                    alert('æ·»åŠ è¿åŠ¨å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼');
                }
                
                // æ¸…ç©ºè¡¨å•
                exerciseName.value = '';
                exerciseDuration.value = '';
                
                renderExerciseList();
            }
            
            // åˆ‡æ¢è¿åŠ¨çŠ¶æ€
            async function toggleExerciseStatus(id) {
                const exerciseIndex = exercises.findIndex(ex => ex.id === id);
                if (exerciseIndex !== -1) {
                    const exercise = exercises[exerciseIndex];
                    const newCompletedStatus = !exercise.completed;
                    
                    try {
                        await exercisesAPI.updateExerciseStatus(id, newCompletedStatus);
                        exercise.completed = newCompletedStatus;
                        
                        // è®°å½•å®Œæˆæ—¶é—´
                        if (newCompletedStatus) {
                            exercise.completedAt = new Date().toLocaleString();
                        } else {
                            delete exercise.completedAt;
                        }
                        
                    } catch (error) {
                        console.error('æ›´æ–°è¿åŠ¨çŠ¶æ€å¤±è´¥:', error);
                        console.log('æ›´æ–°è¿åŠ¨çŠ¶æ€å¤±è´¥ï¼Œè¯·é‡è¯•');
                    }
                    
                    renderExerciseList();
                }
            }
            
            // åˆ é™¤è¿åŠ¨
            async function deleteExercise(id) {
                const exerciseIndex = exercises.findIndex(ex => ex.id === id);
                if (exerciseIndex !== -1) {
                    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¿åŠ¨å—ï¼Ÿ')) {
                        try {
                            await exercisesAPI.deleteExercise(id);
                            exercises.splice(exerciseIndex, 1);
                            alert('è¿åŠ¨åˆ é™¤æˆåŠŸï¼');
                        } catch (error) {
                            console.error('åˆ é™¤è¿åŠ¨å¤±è´¥:', error);
                            alert('åˆ é™¤è¿åŠ¨å¤±è´¥ï¼Œè¯·é‡è¯•');
                        }
                        
                        renderExerciseList();
                    }
                }
            }
            
            // æ¸…é™¤å·²å®Œæˆè¿åŠ¨
            async function clearCompleted() {
                const completedExercises = exercises.filter(ex => ex.completed);
                
                try {
                    // æ‰¹é‡åˆ é™¤å·²å®Œæˆè¿åŠ¨
                    for (const exercise of completedExercises) {
                        await exercisesAPI.deleteExercise(exercise.id);
                    }
                    exercises = exercises.filter(ex => !ex.completed);
                    alert('å·²å®Œæˆè¿åŠ¨æ¸…é™¤æˆåŠŸï¼');
                } catch (error) {
                    console.error('æ¸…é™¤å·²å®Œæˆè¿åŠ¨å¤±è´¥:', error);
                    alert('æ¸…é™¤å·²å®Œæˆè¿åŠ¨å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼');
                }
                renderExerciseList();
            }
            
            // æ¸…é™¤æ‰€æœ‰è¿åŠ¨
            async function clearAll() {
                if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰è¿åŠ¨å—ï¼Ÿ')) {
                    try {
                        // æ‰¹é‡åˆ é™¤æ‰€æœ‰è¿åŠ¨
                        for (const exercise of [...exercises]) {
                            await exercisesAPI.deleteExercise(exercise.id);
                        }
                        exercises = [];
                        alert('æ‰€æœ‰è¿åŠ¨æ¸…é™¤æˆåŠŸï¼');
                    } catch (error) {
                        console.error('æ¸…é™¤æ‰€æœ‰è¿åŠ¨å¤±è´¥:', error);
                        alert('æ¸…é™¤æ‰€æœ‰è¿åŠ¨å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼');
                    }
                    renderExerciseList();
                }
            }
            
            // æ·»åŠ è¿åŠ¨ç±»å‹
            async function addExerciseType() {
                const newType = newTypeInput.value.trim();
                if (newType) {
                    // æ£€æŸ¥å‰ç«¯æ˜¯å¦å·²æœ‰è¯¥ç±»å‹
                    if (exerciseTypes.includes(newType)) {
                        alert('è¯¥è¿åŠ¨ç±»å‹å·²å­˜åœ¨');
                        return;
                    }
                    
                    try {
                        await exercisesAPI.createExerciseType(newType);
                        exerciseTypes.push(newType);
                        alert('è¿åŠ¨ç±»å‹æ·»åŠ æˆåŠŸï¼');
                    } catch (error) {
                        console.error('æ·»åŠ è¿åŠ¨ç±»å‹å¤±è´¥:', error);
                        
                        // å¤„ç†ç‰¹å®šçš„é”™è¯¯ç±»å‹
                        if (error.message && error.message.includes('è¯¥è¿åŠ¨ç±»å‹å·²å­˜åœ¨')) {
                            alert('è¯¥è¿åŠ¨ç±»å‹å·²å­˜åœ¨ï¼Œè¯·é€‰æ‹©å…¶ä»–ç±»å‹');
                        } else {
                            alert('æ·»åŠ è¿åŠ¨ç±»å‹å¤±è´¥ï¼Œè¯·é‡è¯•');
                        }
                    }
                    newTypeInput.value = '';
                    renderExerciseTypes();
                }
            }
            
            // åº”ç”¨ç­›é€‰å’Œæ’åº
            function applyFilters() {
                currentFilter = filterType.value;
                currentSort = sortBy.value;
                renderExerciseList();
            }
            
            // å¯¼å‡ºæ•°æ®
            function exportData() {
                const data = {
                    exercises,
                    exerciseTypes,
                    exportDate: new Date().toISOString()
                };
                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `exercises-${new Date().toISOString().slice(0, 10)}.json`;
                link.click();
                URL.revokeObjectURL(url);
            }
            
            // å¯¼å…¥æ•°æ®
            async function importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = async function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = async function(event) {
                            try {
                                const importedData = JSON.parse(event.target.result);
                                
                                // è°ƒç”¨APIå¯¼å…¥æ•°æ®
                                await exercisesAPI.importData(importedData);
                                
                                // é‡æ–°åŠ è½½æ•°æ®
                                await loadExercises();
                                await loadExerciseTypes();
                                
                                alert('æ•°æ®å¯¼å…¥æˆåŠŸï¼');
                            } catch (error) {
                                console.error('å¯¼å…¥å¤±è´¥ï¼š' + error.message);
                                alert('å¯¼å…¥å¤±è´¥ï¼š' + error.message);
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            }
            
            // é‡ç½®æ•°æ®
            async function resetData() {
                if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                    try {
                        // è°ƒç”¨APIé‡ç½®æ•°æ®
                        await exercisesAPI.resetData();
                        exercises = [];
                        exerciseTypes = ['æœ‰æ°§è¿åŠ¨', 'åŠ›é‡è®­ç»ƒ', 'æŸ”éŸ§æ€§è®­ç»ƒ', 'å¹³è¡¡è®­ç»ƒ'];
                        renderExerciseList();
                        renderExerciseTypes();
                        alert('æ•°æ®å·²é‡ç½®ï¼');
                    } catch (error) {
                        console.error('é‡ç½®æ•°æ®å¤±è´¥:', error);
                        alert('é‡ç½®æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼');
                    }
                }
            }
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            addExerciseBtn.addEventListener('click', addExercise);
            clearCompletedBtn.addEventListener('click', clearCompleted);
            clearAllBtn.addEventListener('click', clearAll);
            addTypeBtn.addEventListener('click', addExerciseType);
            applyFiltersBtn.addEventListener('click', applyFilters);
            exportDataBtn.addEventListener('click', exportData);
            importDataBtn.addEventListener('click', importData);
            resetDataBtn.addEventListener('click', resetData);
            
            // æ¯æ—¥æé†’äº‹ä»¶ç›‘å¬å™¨
            reminderToggle.addEventListener('change', async () => {
                reminderSettings.enabled = reminderToggle.checked;
                await saveReminderSettings();
            });
            
            saveReminderBtn.addEventListener('click', async () => {
                reminderSettings.time = reminderTime.value;
                await saveReminderSettings();
            });
            
            // å›è½¦é”®æ·»åŠ è¿åŠ¨
            document.querySelectorAll('#exercise-name, #exercise-duration').forEach(input => {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        addExercise();
                    }
                });
            });
            
            // å›è½¦é”®æ·»åŠ ç±»å‹
            newTypeInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    addExerciseType();
                }
            });
            
            // åˆå§‹åŒ–
            await loadExercises();
            await loadExerciseTypes();
            await loadReminderSettings();
            updateStats();
        });
    </script>
</body>
</html>